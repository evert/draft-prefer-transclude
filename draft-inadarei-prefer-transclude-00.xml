<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.7 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="inadarei-prefer-transclude" category="info">

  <front>
    <title abbrev="Transclude for HTTP Prefer">Transclude Preference for the HTTP Prefer Header</title>

    <author initials="I." surname="Nadareishvili" fullname="Irakli Nadareishvili">
      <organization></organization>
      <address>
        <postal>
          <street>114 5th Avenue</street>
          <city>New York</city>
          <country>United States</country>
        </postal>
        <email>irakli@gmail.com</email>
        <uri>http://www.freshblurbs.com/</uri>
      </address>
    </author>
    <author initials="E." surname="Wilde" fullname="Erik Wilde">
      <organization></organization>
      <address>
        <email>dret@ca.com</email>
        <uri>http://dret.net/netdret/</uri>
      </address>
    </author>

    <date year="2018"/>

    <area>General</area>
    
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>The Transclude preference is a registered behavior for the HTTP Prefer header 
field. Its purpose is for clients to specify preferences that certain links in 
a response should be resolved by the server, instead of being served as links 
that the client can resolve.</t>



    </abstract>


    <note title="Note to Readers">


<t><spanx style="strong">RFC EDITOR: please remove this section before publication</spanx></t>

<t>The issues list for this draft can be found at <eref target="https://github.com/inadarei/draft-prefer-transclude/issues">https://github.com/inadarei/draft-prefer-transclude/issues</eref>.</t>

<t>The most recent draft is at <eref target="https://inadarei.github.io/draft-prefer-transclude/">https://inadarei.github.io/draft-prefer-transclude/</eref>.</t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>“Prefer Header for HTTP” <xref target="RFC7240"/> proposes an HTTP header that can be used 
to indicate that particular server behaviors are preferred by the client but 
are not required for successful completion of the request. It further defines 
several standard Preferences, such as the “return” preference. The “return” 
preference lets the server know that the client would prefer a specific 
representation of a resource in a response payload, e.g. full representation 
vs. a minimal one.</t>

<t>Preferences like the “return” one are critical for mobile scenarios as mobile 
applications are very sensitive to network latency, throughput and anything 
that can improve end-user experience, even on resource-constrained networks. 
Prefer header allows servers to tune and optimize its response payload based 
on client preferences, for instance: to only send mobile app a minimal response 
when it doesn’t need full resource.</t>

<t>The size of the payload is not the only preference that can improve 
user-experience in mobile scenarios, however. Closely related to the size of 
the payload, is the number of HTTP requests a client needs to make to get all 
of the required data. This is the challenge that “transclude” preference 
addresses.</t>

<t>When server sends hypermedia responses (e.g. in the case of Hypermedia APIs) 
some of the response data may be referenced via a URI link instead of being 
embedded in the payload itself. The need to grab data from a link can degrade 
experience of mobile applications, since they are forced to make multiple 
requests to per single end-user request. This is sometimes referred to as 
“chatty interface” and is a significant problem for mobile and Internet of 
Things scenarios.</t>

<t>Transclude preference notifies the server that the client would prefer the
server to proactively transclude certain content represented by links of
indicated link relation types. The notion of “link relation type”, in this
context is as defined by <xref target="RFC5988"/></t>

<t>As a result of using a transclude preference, a client receives all of the
required data already embedded in the response output, without the need to make
additional network calls.</t>

</section>
<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in <xref target="RFC2119"/>.</t>

</section>
<section anchor="transclude-usage-example" title="Transclude Usage Example">

<t>Following is an example of a client asking server to transclude data represented 
at the copyright, edit-form and “other-form” links. Since “other-form” is not 
a standard, IANA link relation type, client is using a URI for identifying the 
link relation type.</t>

<figure><artwork><![CDATA[
Get /blog/1223 HTTP/1.1
Host: api.example.org
Content-Type: application/json  
Prefer: transclude="copyright;edit-form;http://rels.io/other-form"
Vary: Prefer,Accept,Accept-Encoding
]]></artwork></figure>

<t>As you can see from the example, the transclude preference expects the value 
to be enclosed in double quotes, if there are multiple link relation types 
provided. Further, standard link relations SHOULD be indicated by name while 
custom link relation types SHOULD be indicated with a unique URI representing 
that link relation. Multiple link relation types MUST be separated by 
semicolons.</t>

<t>Example response may look something like the following:</t>

<figure><artwork><![CDATA[
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Sat, 27 Jun 2015 11:03:32 GMT
Content-Type: application/json; charset=utf-8
Transfer-Encoding: chunked
Connection: close
Vary: Prefer,Accept,Accept-Encoding
Preference-Applied: transclude="copyright;edit-form"
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type
]]></artwork></figure>

<t>As you can see from this output, the server only transcluded copyright and 
edit-form link relation types, but not the custom type client requested. This 
is because preferences are just suggestions and server has no obligation related 
to them. In this case, we can assume that the server skipped the last link 
relation type because maybe it wasn’t familiar with it, or for some other 
reason.</t>

</section>
<section anchor="implementation-considerations" title="Implementation Considerations">

<t>Transclude preference is media-type agnostic. It should work with any response 
content-type. The mechanics of transclusion, however will either depend on 
capabilities of the response media-type or require a multi-part response with 
multiple media types in the response.</t>

</section>
<section anchor="multipart-response-example" title="Multipart Response Example">

<figure><artwork><![CDATA[
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Thu, 15 Sep 2016 11:03:32 GMT
Content-type: multipart/mixed; boundary="some boundary string"

--some boundary string
Content-Type: application/hal+json; charset=utf-8

{
    "_links": {
        "self": { "href": "/orders" },
        "edit-form": { "href": "/create" }
    },
    "currentlyProcessing": 14,
    "shippedToday": 20
}

--some boundary string
Content-Type: application/prs.hal-forms+json

{
    "_links" : {
        "self" : { "href" : "/create" }
    },
    "_templates" : {
        "default" : {
            "title" : "Create",
            "method" : "post",
            "contentType" : "application/json",
            "properties" : [
                {"name": "title", "required": true, 
                 "prompt": "Title"},
                {"name": "completed", "value": "false", 
                 "prompt": "Completed"}
            ]
        }
    }
}
--some boundary string--
]]></artwork></figure>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>None.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>The HTTP Preference below is being registered with IANA per Section 5.1 of 
<xref target="RFC7240"/>:</t>

<t>Preference: transclude
Value:
Optional Parameters:
Description:
Reference: RFC XXXX</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC5988" target='https://www.rfc-editor.org/info/rfc5988'>
<front>
<title>Web Linking</title>
<author initials='M.' surname='Nottingham' fullname='M. Nottingham'><organization /></author>
<date year='2010' month='October' />
<abstract><t>This document specifies relation types for Web links, and defines a registry for them.  It also defines the use of such links in HTTP headers with the Link header field.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='5988'/>
<seriesInfo name='DOI' value='10.17487/RFC5988'/>
</reference>



<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC7240" target='https://www.rfc-editor.org/info/rfc7240'>
<front>
<title>Prefer Header for HTTP</title>
<author initials='J.' surname='Snell' fullname='J. Snell'><organization /></author>
<date year='2014' month='June' />
<abstract><t>This specification defines an HTTP header field that can be used by a client to request that certain behaviors be employed by a server while processing a request.</t></abstract>
</front>
<seriesInfo name='RFC' value='7240'/>
<seriesInfo name='DOI' value='10.17487/RFC7240'/>
</reference>




    </references>

    <references title='Informative References'>





<reference  anchor="RFC7230" target='https://www.rfc-editor.org/info/rfc7230'>
<front>
<title>Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</title>
<author initials='R.' surname='Fielding' fullname='R. Fielding' role='editor'><organization /></author>
<author initials='J.' surname='Reschke' fullname='J. Reschke' role='editor'><organization /></author>
<date year='2014' month='June' />
<abstract><t>The Hypertext Transfer Protocol (HTTP) is a stateless application-level protocol for distributed, collaborative, hypertext information systems.  This document provides an overview of HTTP architecture and its associated terminology, defines the &quot;http&quot; and &quot;https&quot; Uniform Resource Identifier (URI) schemes, defines the HTTP/1.1 message syntax and parsing requirements, and describes related security concerns for implementations.</t></abstract>
</front>
<seriesInfo name='RFC' value='7230'/>
<seriesInfo name='DOI' value='10.17487/RFC7230'/>
</reference>



<reference  anchor="RFC6838" target='https://www.rfc-editor.org/info/rfc6838'>
<front>
<title>Media Type Specifications and Registration Procedures</title>
<author initials='N.' surname='Freed' fullname='N. Freed'><organization /></author>
<author initials='J.' surname='Klensin' fullname='J. Klensin'><organization /></author>
<author initials='T.' surname='Hansen' fullname='T. Hansen'><organization /></author>
<date year='2013' month='January' />
<abstract><t>This document defines procedures for the specification and registration of media types for use in HTTP, MIME, and other Internet protocols.  This memo documents an Internet Best Current Practice.</t></abstract>
</front>
<seriesInfo name='BCP' value='13'/>
<seriesInfo name='RFC' value='6838'/>
<seriesInfo name='DOI' value='10.17487/RFC6838'/>
</reference>



<reference  anchor="RFC7231" target='https://www.rfc-editor.org/info/rfc7231'>
<front>
<title>Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</title>
<author initials='R.' surname='Fielding' fullname='R. Fielding' role='editor'><organization /></author>
<author initials='J.' surname='Reschke' fullname='J. Reschke' role='editor'><organization /></author>
<date year='2014' month='June' />
<abstract><t>The Hypertext Transfer Protocol (HTTP) is a stateless \%application- level protocol for distributed, collaborative, hypertext information systems.  This document defines the semantics of HTTP/1.1 messages, as expressed by request methods, request header fields, response status codes, and response header fields, along with the payload of messages (metadata and body content) and mechanisms for content negotiation.</t></abstract>
</front>
<seriesInfo name='RFC' value='7231'/>
<seriesInfo name='DOI' value='10.17487/RFC7231'/>
</reference>




    </references>


<section anchor="acknowledgments" title="Acknowledgments">

</section>


  </back>

<!-- ##markdown-source:
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
d6Gya9LnKKOrx0LnK/4rjvgfNU1lhfoaAAA=

-->

</rfc>

