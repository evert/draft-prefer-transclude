<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.7 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc tocindent="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>

<rfc ipr="trust200902" docName="inadarei-prefer-transclude" category="info">

  <front>
    <title abbrev="Transclude for HTTP Prefer">Transclude Preference for the HTTP Prefer Header</title>

    <author initials="I." surname="Nadareishvili" fullname="Irakli Nadareishvili">
      <organization></organization>
      <address>
        <postal>
          <street>114 5th Avenue</street>
          <city>New York</city>
          <country>United States</country>
        </postal>
        <email>irakli@gmail.com</email>
        <uri>http://www.freshblurbs.com/</uri>
      </address>
    </author>
    <author initials="E." surname="Wilde" fullname="Erik Wilde">
      <organization></organization>
      <address>
        <email>dret@ca.com</email>
        <uri>http://dret.net/netdret/</uri>
      </address>
    </author>

    <date year="2018"/>

    <area>General</area>
    
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>The Transclude preference is a registered behavior for the HTTP Prefer header 
field. Its purpose is for clients to specify preferences that certain links in 
a response should be resolved by the server, instead of being served as links 
that the client can resolve.</t>



    </abstract>


    <note title="Note to Readers">


<t><spanx style="strong">RFC EDITOR: please remove this section before publication</spanx></t>

<t>The issues list for this draft can be found at <eref target="https://github.com/inadarei/draft-prefer-transclude/issues">https://github.com/inadarei/draft-prefer-transclude/issues</eref>.</t>

<t>The most recent draft is at <eref target="https://inadarei.github.io/draft-prefer-transclude/">https://inadarei.github.io/draft-prefer-transclude/</eref>.</t>


    </note>


  </front>

  <middle>


<section anchor="introduction" title="Introduction">

<t>“Prefer Header for HTTP” <xref target="RFC7240"/> proposes an HTTP header that can be used 
to indicate that particular server behaviors are preferred by the client but 
are not required for successful completion of the request. It further defines 
several standard Preferences, such as the “return” preference. The “return” 
preference lets the server know that the client would prefer a specific 
representation of a resource in a response payload, e.g. full representation 
vs. a minimal one.</t>

<t>Preferences like the “return” one are critical for mobile scenarios as mobile 
applications are very sensitive to network latency, throughput and anything 
that can improve end-user experience, even on resource-constrained networks. 
Prefer header allows servers to tune and optimize its response payload based 
on client preferences, for instance: to only send mobile app a minimal response 
when it doesn’t need full resource.</t>

<t>The size of the payload is not the only preference that can improve 
user-experience in mobile scenarios, however. Closely related to the size of 
the payload, is the number of HTTP requests a client needs to make to get all 
of the required data. This is the challenge that “transclude” preference 
addresses.</t>

<t>When server sends hypermedia responses (e.g. in the case of Hypermedia APIs) 
some of the response data may be referenced via a URI link instead of being 
embedded in the payload itself. The need to grab data from a link can degrade 
experience of mobile applications, since they are forced to make multiple 
requests to per single end-user request. This is sometimes referred to as 
“chatty interface” and is a significant problem for mobile and Internet of 
Things scenarios.</t>

<t>Transclude preference notifies the server that the client would prefer the
server to proactively transclude certain content represented by links of
indicated link relation types. The notion of “link relation type”, in this
context is as defined by <xref target="RFC5988"/></t>

<t>As a result of using a transclude preference, a client receives all of the
required data already embedded in the response output, without the need to make
additional network calls.</t>

</section>
<section anchor="notational-conventions" title="Notational Conventions">

<t>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
“SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be
interpreted as described in <xref target="RFC2119"/>.</t>

</section>
<section anchor="transclude-usage-example" title="Transclude Usage Example">

<t>Following is an example of a client asking server to transclude data represented 
at the copyright, edit-form and “other-form” links. Since “other-form” is not 
a standard, IANA link relation type, client is using a URI for identifying the 
link relation type.</t>

<figure><artwork><![CDATA[
Get /blog/1223 HTTP/1.1
Host: api.example.org
Content-Type: application/json  
Prefer: transclude="copyright;edit-form;http://rels.io/other-form"
Vary: Prefer,Accept,Accept-Encoding
]]></artwork></figure>

<t>As you can see from the example, the transclude preference expects the value 
to be enclosed in double quotes, if there are multiple link relation types 
provided. Further, standard link relations SHOULD be indicated by name while 
custom link relation types SHOULD be indicated with a unique URI representing 
that link relation. Multiple link relation types MUST be separated by 
semicolons.</t>

<t>Example response may look something like the following:</t>

<figure><artwork><![CDATA[
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Sat, 27 Jun 2015 11:03:32 GMT
Content-Type: application/json; charset=utf-8
Transfer-Encoding: chunked
Connection: close
Vary: Prefer,Accept,Accept-Encoding
Preference-Applied: transclude="copyright;edit-form"
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: Content-Type
]]></artwork></figure>

<t>As you can see from this output, the server only transcluded copyright and 
edit-form link relation types, but not the custom type client requested. This 
is because preferences are just suggestions and server has no obligation related 
to them. In this case, we can assume that the server skipped the last link 
relation type because maybe it wasn’t familiar with it, or for some other 
reason.</t>

</section>
<section anchor="implementation-considerations" title="Implementation Considerations">

<t>Transclude preference is media-type agnostic. It should work with any response 
content-type. The mechanics of transclusion, however will either depend on 
capabilities of the response media-type or require a multi-part response with 
multiple media types in the response.</t>

</section>
<section anchor="multipart-response-example" title="Multipart Response Example">

<figure><artwork><![CDATA[
HTTP/1.1 200 OK
Server: nginx/1.4.6 (Ubuntu)
Date: Thu, 15 Sep 2016 11:03:32 GMT
Content-type: multipart/mixed; boundary="some boundary string"

--some boundary string
Content-Type: application/hal+json; charset=utf-8

{
    "_links": {
        "self": { "href": "/orders" },
        "edit-form": { "href": "/create" }
    },
    "currentlyProcessing": 14,
    "shippedToday": 20
}

--some boundary string
Content-Type: application/prs.hal-forms+json

{
    "_links" : {
        "self" : { "href" : "/create" }
    },
    "_templates" : {
        "default" : {
            "title" : "Create",
            "method" : "post",
            "contentType" : "application/json",
            "properties" : [
                {"name": "title", "required": true, 
                 "prompt": "Title"},
                {"name": "completed", "value": "false", 
                 "prompt": "Completed"}
            ]
        }
    }
}
--some boundary string--
]]></artwork></figure>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>None.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>The HTTP Preference below is being registered with IANA per Section 5.1 of 
<xref target="RFC7240"/>:</t>

<t>Preference: transclude
Value:
Optional Parameters:
Description:
Reference: RFC XXXX</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC5988" target='https://www.rfc-editor.org/info/rfc5988'>
<front>
<title>Web Linking</title>
<author initials='M.' surname='Nottingham' fullname='M. Nottingham'><organization /></author>
<date year='2010' month='October' />
<abstract><t>This document specifies relation types for Web links, and defines a registry for them.  It also defines the use of such links in HTTP headers with the Link header field.  [STANDARDS-TRACK]</t></abstract>
</front>
<seriesInfo name='RFC' value='5988'/>
<seriesInfo name='DOI' value='10.17487/RFC5988'/>
</reference>



<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC7240" target='https://www.rfc-editor.org/info/rfc7240'>
<front>
<title>Prefer Header for HTTP</title>
<author initials='J.' surname='Snell' fullname='J. Snell'><organization /></author>
<date year='2014' month='June' />
<abstract><t>This specification defines an HTTP header field that can be used by a client to request that certain behaviors be employed by a server while processing a request.</t></abstract>
</front>
<seriesInfo name='RFC' value='7240'/>
<seriesInfo name='DOI' value='10.17487/RFC7240'/>
</reference>




    </references>



<section anchor="acknowledgments" title="Acknowledgments">

</section>


  </back>

<!-- ##markdown-source:
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
a9LnKKOrx0LnK/7zjfgfY6G6YfMaAAA=

-->

</rfc>

